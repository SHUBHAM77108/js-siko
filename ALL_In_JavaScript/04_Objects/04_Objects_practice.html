<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Objects Pratices</title>
</head>
<body>
    <script>
        // const product1 = {
//     product: 'basketball',
//     price: 2095
// }

// product1.price = 500; // update price from 2095 to 500

// product1['delivery-time'] = '3days';

// console.log(product1);

function comparePrice (product1,product2) {
if (product1.price < product2.price) {
        return product1;
    } else {
        return product2;
    }
}

const product1 = {
    name: 'basketball',
    price: 2095
};

const product2 = {
    name: 'socks',
    price: 1090
};

const product3 = {
    name: 'basketball',
    price: 2095
}

console.log(comparePrice(product1,product2));

function isSameProducts(product1,product2) {
    return (product1 === product2 && product1 === product2);
} // This code allways give false because we've comparing object. objects are comparing there references not a value that way we compare values inside the both objects

function isSameProducts(product1,product2) {
    return (product1.name === product2.name && product1.price === product2.price);
}

console.log(isSameProducts(product1, product2));
console.log(isSameProducts(product1, product3));

console.log('Good Morning'.toLowerCase());
console.log('TESTING'.toLowerCase());

console.log('hello'.repeat(2));
console.log('test'.repeat(3));

// Here are some practice questions combining functions, localStorage, and objects in JavaScript:

// Practice Questions
// 1---> Questions
// Write a function named saveUser that takes an object representing a user (with properties name, age, and email) and saves it to localStorage under the key "user". Then, write another function named getUser that retrieves the user object from localStorage and returns it.

// function to save user data in localStorage
function saveUser (name, age, email) {
    const user = {
        UserName: name,
        UserAge: age,
        UserEmail: email
    }
    // converting user object to string and saving in localStorage
    localStorage.setItem('user', JSON.stringify(user));
}

// function to retrieve user data from localStorage
function getUser() {
    // Retrieving the user data as string and converting it back to object
    let userData = JSON.parse(localStorage.getItem('user')); // using getItem method 
    return userData;
}

saveUser('shubham',23, 'shu@gmail.com'); // Saving user data
console.log(getUser()); // Retrieving user data from localStorage

// 2---> Questions
// Write a function named saveCar that takes an object representing a car (with properties make, model, and year) and saves it to localStorage under the key "car". Then, write another function named getCar that retrieves the car object from localStorage and returns it.

// function to save data in localStorage 
function saveCar (make, model, year) {
    const car = {
        carMake : make,
        carModel : model,
        carYear : year
    }
    // converting car object to string and saving in localStorage
    localStorage.setItem('car',JSON.stringify(car));
}

// function to retrieve car data from localStorage
function getCar () {
    // Retrieving the car data as string and converting it back to object
    let carData = JSON.parse(localStorage.getItem('car'));
    return carData;
}

saveCar('Tata','Nexon', 2022); // Saving user data
console.log(getCar()); // // Retrieving user data from localStorage

// 3---> Questions
// Write a function named saveAddress that takes an object representing an address (with properties street, city, and zipCode) and saves it to localStorage under the key "address". Then, write another function named getAddress that retrieves the address object from localStorage.

function saveAddress (street, city, zipcode) {
    const address = {
        streetName: street,
        cityName: city,
        zipCodeName: zipcode
    }
// converting car object to string and saving in localStorage
localStorage.setItem('address',JSON.stringify(address));
}

function getAddress () {
    let addresData = JSON.parse(localStorage.getItem('address'));
    return addresData;
}

saveAddress('K.M road kali Nagar','Kolibapur',501455);
console.log(getAddress());

// 4---> Questions
// Write a function named saveUserWithTimestamp that takes an object representing a user (with properties name and email) and adds a property timestamp with the current date and time. Then, save this object to localStorage under the key "user". Write another function named getUserAndTimeElapsed that retrieves the user from localStorage and returns how many seconds have passed since the user was saved.

function saveUserWithTimestamp (name,email) {
    let currentDate = new Date();

    const user = {
        timestamp: currentDate, // Save the full Date object
        username: name,
        userEmail: email 
    }
    localStorage.setItem('user',JSON.stringify(user));
}

function getUserAndTimeElapsed() {
    // Retrieve the user data from localStorage
    let savedUser = JSON.parse(localStorage.getItem('user'));
    
    if (savedUser) {
        // Get the saved timestamp and convert it back to a Date object
        let savedTime = new Date(savedUser.timestamp);

        // Get the current date and time
        let currentTime = new Date();

        // Calculate the time difference in milliseconds
        let timeDifference = currentTime - savedTime; // difference in milliseconds

        // Convert milliseconds to seconds
        let secondsElapsed = Math.floor(timeDifference / 1000);

        return {
            user: savedUser,
            secondsElapsed: secondsElapsed
        };
    } else {
        return "No user found in localStorage.";
    }
}

saveUserWithTimestamp('Amit', 'amit@.com');
console.log(getUserAndTimeElapsed());


    // practice questions that focus on working with objects, modifying object properties, using functions inside objects, and practicing object references. These questions will challenge your understanding of objects and how they interact with localStorage and functions inside objects:

    // 1>----Question
    // Create an object named car with properties make, model, and year. Add a function inside the car object called getCarInfo that returns a string with the car's make, model, and year. Then, write a separate function named saveCarToStorage that saves the car object to localStorage. Finally, write another function named retrieveCarFromStorage that gets the car object from localStorage and logs the result using the getCarInfo method.
    const car = {
        make: 'Tata',
        model: 'Harrier',
        year: 2203,
         // Use a regular function and pass properties as arguments
        getCarInfo: function (make,model,year) {
            return `${make} ${model} ${year}`;
        }
    }

    function saveCarToStorage () {
    localStorage.setItem('car',JSON.stringify(car));
    }

    function retrieveCarFromStorage () {
        let saveCar = JSON.parse(localStorage.getItem('car'))

        // Call the getCarInfo method, passing the properties explicitly
        return car.getCarInfo(saveCar.make, saveCar.model, saveCar.year);
    }

    saveCarToStorage();
    console.log(retrieveCarFromStorage());
    
    // 2>----Questions
    // Create an object named userProfile with properties name, age, and email. Inside the userProfile, define a function updateEmail that takes a new email as a parameter and updates the email property. Then, write a function named saveProfile that saves userProfile to localStorage. After that, retrieve the object from localStorage and call updateEmail on the retrieved object to update the email.

    const userProfile = {
        name: 'shubham',
        age: 23,
        email: 'example@gmail.com',
        updateEmail: function (newEmail) {
            this.email = newEmail;
        }
    }
    function saveProfile () {
       localStorage.setItem('userProfile',JSON.stringify(userProfile));
    }

    function retrieveSaveProfile(newEmail) {
        let retrieveProfileData = JSON.parse(localStorage.getItem('userProfile'));

        if (retrieveProfileData) {

            // Since localStorage cannot store functions, the updateEmail methods are not present in the retrieved object. We restore these methods by manually reattaching userProfile.updateEmail to the retrieveProfileData.
            retrieveProfileData.updateEmail = userProfile.updateEmail;
            retrieveProfileData.updateEmail(newEmail);
            return retrieveProfileData;
        } else {
            return 'NO profile found in localStroge.';
        }
    }

    saveProfile();
    console.log(retrieveSaveProfile('shubham@gmail.com'));

    //3>----Questions
    // Write an object named bankAccount with properties accountHolder, balance, and a function deposit that adds a given amount to the balance. Create another function withdraw inside the bankAccount object that subtracts a given amount from the balance. Then, write a function named storeAccount to save the bankAccount object to localStorage and another function named retrieveAccount that retrieves the object and calls deposit and withdraw to update the balance.

    const bankAccount = {
        accountHolder: 'Raghu',
        balance: 2000,
        deposit: function (amount) {
            this.balance =this.balance + amount;
        },
        withdraw: function (amount) {
            this.balance -= amount;
        }
    }

    function storeAccount () {
        localStorage.setItem('bankAccount', JSON.stringify(bankAccount));    
    }

    function retrieveAccount (newbalance) {
        let saveAccountData = JSON.parse(localStorage.getItem('bankAccount'));
    if (saveAccountData) {

        //Since localStorage cannot store functions, the deposit and withdraw methods are not present in the retrieved object. We restore these methods by manually reattaching bankAccount.deposit and bankAccount.withdraw to the savedAccountData.
        saveAccountData.deposit = bankAccount.deposit;
        saveAccountData.withdraw = bankAccount.withdraw;

        if (newbalance >= 0) {
            //If the newBalance value is positive (newBalance >= 0), we call savedAccountData.deposit(newBalance) to add the amount to the balance.
            saveAccountData.deposit(newbalance);
        } else if (newbalance < 0) {
            //If the newBalance value is negative (newBalance < 0), we call savedAccountData.withdraw(Math.abs(newBalance)). We use Math.abs to convert the negative value into a positive amount for withdrawal.
            saveAccountData.withdraw(Math.abs(newbalance));
        }

        //After updating the balance, the updated savedAccountData is saved back to localStorage using localStorage.setItem('bankAccount', JSON.stringify(savedAccountData)). replacing bankAccount objects data to new update object saveAccountData in localStroge using 'bankAccount' key.
        localStorage.setItem('bankAccount', JSON.stringify(saveAccountData));

        return saveAccountData;
    } else {
            return 'Account holder not find!';
        }
    }

    storeAccount();
    console.log(retrieveAccount(1000));// Deposits 1000 into the account
    console.log(retrieveAccount(-500));// Withdraws 500 from the account

    // 4>----Question
    // Create an object named person with properties firstName, lastName, and a function fullName that returns the person's full name. Write a function named changeLastName that takes a new last name as a parameter and updates the lastName property of the person object. Then, save this person object to localStorage and retrieve it to log the full name using fullName.

    const person = {
        firstName: 'Motu',
        lastName: 'Singh',
        fullName: function () {
            return this.fullName = this.firstName + ' ' + this.lastName;
        },
        lastNameChange: function (newLastName) {
            this.lastName = newLastName;
        }
    }

    function savePerson () {
        localStorage.setItem('person',JSON.stringify(person));
    }

    function retrievePerson (newLastName) {
        let retrievePersonData = JSON.parse(localStorage.getItem('person'));

        //Since localStorage cannot store fullName and lastNameChange functions, We restore these methods by manually reattaching in retrievePersonData
       if(retrievePersonData) {

        retrievePersonData.lastNameChange = person.lastNameChange;
        retrievePersonData.lastNameChange(newLastName);
        retrievePersonData.fullName = person.fullName;

        // Get the full name after changing the last name 
        retrievePersonData.fullName();

        return retrievePersonData
       } else {
        return 'Person not find!';
       }
    }
    savePerson();
    console.log(retrievePerson('Sharma'));

    // 5>----Question
    // Create an object named settings with properties theme, volume, and notificationsEnabled. Inside the object, add a function toggleNotifications that switches the value of notificationsEnabled from true to false or vice versa. Write a function named saveSettings that stores the object in localStorage. Then, write a function named loadSettings that retrieves the settings from localStorage and uses the toggleNotifications method.

    const settings = {
        theme: 'dark',
        volume: 75,
        notificationsEnabled: true,
        toggleNotifications: function () {
            if (this.notificationsEnabled === true) {
                this.notificationsEnabled = false;
                return this.notificationsEnabled;
            } else if (this.notificationsEnabled === false) {
                this.notificationsEnabled = true;
                return this.notificationsEnabled;
            } 
        }
    }

    function saveSettings () {
        localStorage.setItem('settings',JSON.stringify(settings));
    }

    function loadSettings () {
        let loadSettingsData = JSON.parse(localStorage.getItem('settings'));

        if (loadSettingsData) {
            // Re-attach the toggleNotifications method
            loadSettingsData.toggleNotifications = settings.toggleNotifications;

            // Now you can call toggleNotifications method
            loadSettingsData.toggleNotifications();

            return loadSettingsData;
        } else {
            return 'No settings found in localStorage!';
        }
    }
    // save setting in localStroge
    saveSettings();

    // load settings and call toggleNotifications
    console.log(loadSettings());

    //6>----Question
    //Write an object named user with properties username, password, and a function changePassword that updates the password. Write a separate function storeUser to save this object to localStorage. Then, write another function named resetPassword that retrieves the user object from localStorage and calls changePassword to reset the password to a new value.

    const userP = {
        username: 'vivek',
        password: 'vi@859',
        changePassword: function (newpassword) {
            this.password = newpassword;
        }
    }
    function storeUser () {
        localStorage.setItem('userP',JSON.stringify(userP));
    }

    function resetPassword (newpassword) {
        let retrieveUserPData = JSON.parse(localStorage.getItem('userP'));

        if (retrieveUserPData) {
            retrieveUserPData.changePassword = userP.changePassword;
            retrieveUserPData.changePassword(newpassword);
            return retrieveUserPData;
        } else {
            return 'User not find!';
        }
    }
    storeUser();
    console.log(resetPassword('Viv@5547'));

    // 7>----Question
    // Create an object named product with properties name, price, and inStock. Add a function applyDiscount inside the product object that takes a discount percentage and reduces the price accordingly. Write a function named saveProduct that saves the product object to localStorage. Retrieve the product and apply a discount using the applyDiscount function, then log the updated price.

    const productD = {
        name: 'T-shirt',
        price: 899,
        inStock: true,
        applyDiscount: function () {
           this.price -= (this.price * 12) / 100;
        }
    }

    function saveProductD () {
        localStorage.setItem('productD',JSON.stringify(productD));
    }

    function retrieveProducts () {
        let retrieveProductData = JSON.parse(localStorage.getItem('productD'));

        if (retrieveProductData) {
            retrieveProductData.applyDiscount = productD.applyDiscount;
            retrieveProductData.applyDiscount();
            return retrieveProductData;
        } else {
            return 'Product not find!';
        }
    }

    saveProductD();

    console.log(retrieveProducts());
    </script>
</body>
</html>