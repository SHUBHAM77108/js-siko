<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Array Methods Practice</title>
</head>
<body>
<script>
    //Practice Questions: forEach

    //1> Question:
    // Write a function named printEachElement that takes an array and uses forEach to log each element of the array to the console.

    const printEachElement = (arr)=> {
        arr.forEach((element)=> console.log(`${element}`));
    }

    printEachElement([1,2,3,4]);

    //2> Question:
    // Write a function named sumArray that takes an array of numbers and uses forEach to calculate and return the sum of all the elements in the array.

    const sumArray = (arr)=> {
        let result = 0;
        arr.forEach((e,i)=> result += e);
        return `Sum of all array element: ${result}`;
    };

    console.log(sumArray([1,2,3,4]));

    //3> Question:
    // Write a function named convertToUppercase that takes an array of strings and uses forEach to convert each string to uppercase.

    const convertToUppercase = (arr)=> {
        let newArry = [];
        arr.forEach((element,index,arr)=> newArry.push(element.toUpperCase()));
        console.log(newArry);
    }

    convertToUppercase(['apple', 'banana', 'cherry']);

    //4> Question:
    // Write a function named addPrefix that takes an array of strings and a prefix as arguments. Use forEach to add the prefix to each string and return the new array.

    const addPrefix = (arr, prefix)=> {
        let result = [];
        arr.forEach((element)=> result.push(prefix + element)
        );
        console.log(result);
    }

    addPrefix(['cat', 'dog'], 'my-');

    //5> Question:
    // Write a function named countVowels that takes an array of strings and uses forEach to count the total number of vowels (a, e, i, o, u) in all the strings combined.

    const countVowels = (arr)=> {
        let count = 0;
        let allArrayString = [];
        arr.forEach((element)=> {
            for (let i = 0; i < element.length; i++) {
                if (element.charAt(i) === 'a' || element.charAt(i) === 'e' || element.charAt(i) === 'i' || element.charAt(i) === 'o' || element.charAt(i) === 'u' ) {
                    count += 1;
                }
            }
        });
        return count;
    }

    console.log(countVowels(['apple', 'banana'])); // Should return 5

    //6> Question:
    // Write a function named filterShortWords that takes an array of words and uses forEach to log only the words that are shorter than 5 characters.

    const filterShortWords = (arr) => {
        arr.forEach((element)=> {
            if(element.length < 5) {
                console.log(element)
            }
        });
    }

    filterShortWords(['cat', 'dog', 'elephant', 'rat']); // Should log 'cat', 'dog', 'rat'

    //7> Question:
    // Write a function named calculateTotalPrice that takes an array of objects representing products (each object has a name and price property) and uses forEach to calculate and return the total price of all the products.

    const products = [
    {name: 'apple', price: 50}, 
    {name: 'banana', price: 30}, 
    {name: 'cherry', price: 20}];

    const calculateTotalPrice = (arrayOfProduct)=> {
        let totalPrice = 0;
        arrayOfProduct.forEach((element)=> totalPrice += element.price
        );
        return `Total price of all product: ${totalPrice}`;
    }

    console.log(calculateTotalPrice(products)); // Should return 100


//**** Practice Questions: filter

    //1> Question:
    // Write a function named filterEvenNumbers that takes an array of numbers and returns a new array containing only the even numbers using the filter method.

    const filterEvenNumbers = (arr) => {
        return arr.filter((element)=> element % 2 === 0
        );
    }

    console.log(filterEvenNumbers([1, 2, 3, 4, 5, 6])); // Should return [2, 4, 6]

    //2> Question:
    // Write a function named filterShortWords that takes an array of words and returns a new array containing only the words that are shorter than 5 characters using the filter method.


    function filterShortWordsusingFilter(arr){
        return arr.filter((word)=> word.length < 5
    );
    };

    
    console.log(filterShortWordsusingFilter(['apple', 'dog', 'cat', 'elephant'])); // Should return ['dog', 'cat']


    //3> Question:
    // Write a function named filterByPrice that takes an array of objects representing products (each object has a name and price property) and a number maxPrice. Return a new array containing only the products that have a price lower than maxPrice.

    const productsfilter = [{name: 'apple', price: 50}, {name: 'banana', price: 30}, {name: 'cherry', price: 20}];

    const filterByPrice = (arrObject, maxPrice)=> {
        return arrObject.filter((object)=> object.price < maxPrice
        )
    }
    console.log(filterByPrice(productsfilter, 40));

    //4> Question:
    // Write a function named filterWordsContainingLetter that takes an array of words and a letter as arguments. Use the filter method to return a new array containing only the words that contain the given letter.

    const filterWordsContainingLetterInFilter = (arr) => {
        return arr.filter((word,index)=> {
            for(let i = 0; i < word.length; i++) {
                if (word.charAt(i) === 'a') {
                    return true;
                }
            }
            return false
        });
    };


    console.log(filterWordsContainingLetterInFilter(['apple', 'banana', 'date', 'cherry'], 'a')); // Should return ['apple', 'banana', 'date']

    // 5 Question:
    // Write a function named filterPassedStudents that takes an array of objects representing students (each object has a name and score property) and returns a new array containing only the students who passed (score 50 or above).

    function filterPassedStudents (arr) {
        return arr.filter((student)=> student.score > 50)
    }

    const students = [{name: 'Alice', score: 45}, {name: 'Bob', score: 55}, {name: 'Charlie', score: 60}];
    console.log(filterPassedStudents(students)); // Should return [{name: 'Bob', score: 55}, {name: 'Charlie', score: 60}]


//**** Practice Questions: map

    // 1> Question
    // Write a function named doubleNumbers that takes an array of numbers and returns a new array with each number doubled using the map method.

    function doubleNumbers (num) {
        return num.map((element)=> element * 2);
    }
    console.log(doubleNumbers([1, 2, 3, 4]));

    //2> Question:
    // Write a function named capitalizeWords that takes an array of strings and returns a new array with each word capitalized using the map method.

    function capitalizeWords(arrWord) {
        return arrWord.map((element)=> element.toUpperCase());
    }

    console.log(capitalizeWords(['apple', 'banana', 'cherry'])); // Should return ['APPLE', 'BANANA', 'CHERRY']

    //3> Question:
    // Write a function named getFirstLetters that takes an array of strings and returns a new array containing the first letter of each string using the map method.

    const getFirstLetters = (arr)=> {
        return arr.map((element)=> {
            return element.charAt(0);
        })
    }

    console.log(getFirstLetters(['apple', 'banana', 'cherry'])); // Should return ['a', 'b', 'c']

    //4> Question:
    // Write a function named appendIndex that takes an array of strings and returns a new array where each string is appended with its index in the original array using the map method.

    const appendIndex = (arr)=> {
        return arr.map((element, index)=> element + index)
    }

    console.log(appendIndex(['apple', 'banana', 'cherry'])); // Should return ['apple0', 'banana1', 'cherry2']

    //5> Question:
    // Write a function named reverseWords that takes an array of strings and returns a new array where each string is reversed using the map method.

    function reverseWords(arr) {
        return arr.map((element)=> {
            // let newstring = '';
            // for(let i = element.length -1; i >= 0; i--) {
            //     newstring += element[i];
            // }
            // return newstring;

            return element.split('').reverse().join('');// Split the string into an array, reverse it, and join it back
        });
    }

    console.log(reverseWords(['hello', 'world'])); // Should return ['olleh', 'dlrow']

//**** Practice Questions: reduce

    //1> Question:
    //Write a function named sumNumbers that takes an array of numbers and uses the reduce method to return the sum of all the numbers in the array.

    function sumNumbers(arr){
        return arr.reduce(function (acc, currnetValue) {
            return acc + currnetValue;
        },0);
    }
    
    console.log(sumNumbers([1,2,3,4]));// Should return 10

    //2> Question: 
    //Write a function named multiplyNumbers that takes an array of numbers and uses the reduce method to return the product of all the numbers in the array.

    const multiplyNumbers = function (arr) {
        return arr.reduce( function (acc, currnetValue) {
            return acc * currnetValue;
        },1);
    }

    console.log(multiplyNumbers([1, 2, 3, 4])); // Should return 24

    //3> Question:
    //Write a function named concatenateStrings that takes an array of strings and uses the reduce method to return a single string that is the result of concatenating all the strings in the array.

    const concatenateStrings = (arr)=> {
        return arr.reduce((acc, element)=> acc += element);
    }

    console.log(concatenateStrings(['Hello', ' ', 'World'])); // Should return 'Hello World'

    //4> Question:
    //Write a function named findMax that takes an array of numbers and uses the reduce method to return the largest number in the array.

    const findMax = (arr)=> {
        return arr.reduce((acc, currentElement)=> {
            if (acc < currentElement) {
                acc = currentElement;
            }
            return acc;
        }, 1);
    };

    console.log(findMax([1, 3, 9, 2, 3, 1])); // Should return 9

    //5> Question:
    //Write a function named countOccurrences that takes an array of strings and a target string. Use the reduce method to count how many times the target string appears in the array.

    const countOccurrences = (arr,string)=> {
        return arr.reduce((acc,element)=> {
            if (element === string){
                acc += 1;
            }
            return acc;
        }, 0);
    }

    console.log(countOccurrences(['apple', 'banana', 'apple', 'cherry'], 'apple')); // Should return 2

    //6> Question:
    //Write a function named flattenArray that takes a 2D array (an array of arrays) and uses the reduce method to flatten it into a 1D array.

    const flattenArray = (arr) => {
        return arr.reduce((acc,currentarr)=> acc.concat(currentarr), []);
    };

    console.log(flattenArray([[1, 2], [3, 4], [5, 6]]));// Should return [1, 2, 3, 4, 5, 6]

    //7> Question:
    // Write a function named countVotes that takes an array of vote objects (each object has a candidate property) and uses the reduce method to count how many votes each candidate received. Return an object with the candidate names as keys and their vote counts as values.

    const votes = [{candidate: 'A'}, {candidate: 'B'}, {candidate: 'A'}, {candidate: 'B'}, {candidate: 'A'}];

    const countVotes = (votes)=> {
        let voteCount2 = {};
        console.log(voteCount2);
        return votes.reduce((voteCount,vote)=> {
            //short way
            // accumulator object ke andar ek nayi property ko create kar raha hai aur us property ki value ko set kar raha hai.
            // voteCount[vote.candidate] = (voteCount[vote.candidate] || 0) + 1;
            console.log(vote);
            if (voteCount2[vote.candidate]) {
                voteCount2[vote.candidate] += 1;  // Increment count if candidate exists
            } else {
                voteCount2[vote.candidate] = 1;  // Initialize count to 1 if candidate doesn't exist
            }
            return voteCount2;
        },{});
    };

    console.log(countVotes(votes)); // Should return { A: 3, B: 2 }

    //8> Question:
    // Write a function named sumPrice that takes an array of objects representing products (each object has a name and price property) and uses the reduce method to calculate the total price of all the products.

    const sumPrice = (arr)=> {
        return arr.reduce((accumulator, element)=> {
            return accumulator += element.price;
        }, 0);
    };

    const productsTwo = [{name: 'apple', price: 50}, {name: 'banana', price: 30}, {name: 'cherry', price: 20}];
    console.log(sumPrice(productsTwo)); // Should return 100

    //9 Question:
    // Write a function named groupByFirstLetter that takes an array of strings and uses the reduce method to group the strings by their first letter. Return an object where the keys are the first letters and the values are arrays of strings that start with that letter.

    const groupByFirstLetter = (arr)=> {
        arr.sort();
        return arr.reduce((acc, element)=> {
            let property = element.charAt(0);

            if (!acc[property]) {
                acc[property] = [];
            }

            acc[property].push(element);

            return acc
        }, {});
    };

    console.log(groupByFirstLetter(['apple', 'banana', 'cherry', 'apricot', 'blueberry'])); // Should return { a: ['apple', 'apricot'], b: ['banana', 'blueberry'], c: ['cherry'] }

    //10 Question:
    // Write a function named findMostFrequent that takes an array of numbers and uses the reduce method to find the most frequent number in the array.

    const findMostFrequent = (arr)=> {
        const frequencyMap = arr.reduce((acc, element)=> {
            //Check if element already exists in acc, if yes increment, else initialize with 1
            // acc[element] = (acc[element] || 0) + 1;

            if (acc[element] !== undefined) {
                acc[element] = acc[element] + 1;
            } else {
                acc[element] = 1;
            }

            return acc;
        }, {});

        //setp 2: Find the most frequent number
        let mostFrequentNum = null;
        let maxCount = 0;

        //Loop through frequencyMap to find the element with the highest count
        for (let num in frequencyMap) {
            if (frequencyMap[num] > maxCount) {
                maxCount = frequencyMap[num];
                mostFrequentNum = Number(num);// convert key back to a number
            }
        }

        return mostFrequentNum;
    }

    console.log(findMostFrequent([1, 1, 2, 2, 3, 3, 3, 4])); // Should return 3)

    // Question 1: Combining map, filter, and reduce
    // You have an array of products with name, price, and category. Write a function getTotalPriceOfCategory that does the following:

    // Filter the products by a specific category.
    // Map the filtered products to only their prices.
    // Reduce the resulting array of prices to get the total sum of the prices.
    // Finally, log the total using forEach.

    const products3 = [
    { name: 'Apple', price: 100, category: 'Fruit' },
    { name: 'Banana', price: 60, category: 'Fruit' },
    { name: 'Carrot', price: 40, category: 'Vegetable' },
    { name: 'Tomato', price: 50, category: 'Vegetable' },
    { name: 'Mango', price: 120, category: 'Fruit' }
];

// function getTotalPriceOfCategory(products, category) {
//     // Step 1: Filter the products by category
//     const filteredProducts = products.filter(product => product.category === category);
    
//     // Step 2: Map the filtered products to get their prices
//     const prices = filteredProducts.map(product => product.price);
    
//     // Step 3: Reduce the prices array to get the total price
//     const totalPrice = prices.reduce((acc, price) => acc + price, 0);
    
//     // Step 4: Use forEach to log the total price (even though forEach isn't really necessary for logging one value)
//     [totalPrice].forEach(total => console.log(`Total price for category "${category}" is: ${total}`));
// }


// Should log the total price of all 'Fruit' category products.

// same Question using chain the method 

function getTotalPriceOfCategory(products, category) {
    [products.filter(product => product.category === category).map(product => product.price).reduce((acc, price) => acc + price, 0)].forEach(total => console.log(`Total price for category "${category}" is: ${total}`))
}

getTotalPriceOfCategory(products3, 'Fruit');

// The reason the filter(), map(), and reduce() methods are wrapped inside an array is to make the final result iterable so that we can apply forEach() at the end. Normally, reduce() returns a single value (not an array), so it can't be used directly with forEach().


// Question 2: Filtering and Summing Ages
// You have an array of people with name and age. Write a function getTotalAgeAbove that:

// Filter the people who are older than a given age.
// Map to get their ages.
// Reduce to find the total of their ages.
// Use forEach to log each person's name who was included in the sum.


const people = [
    { name: 'John', age: 28 },
    { name: 'Jane', age: 34 },
    { name: 'Tom', age: 18 },
    { name: 'Anna', age: 25 },
    { name: 'Mike', age: 40 }
];

function getTotalAgeAbove(people, ageLimit) {
    const filteredPeple = people.filter(person => person.age > ageLimit);

    const ages = filteredPeple.map(people => people.age);

    const totalAge = ages.reduce((sum, age)=> sum + age, 0);

    filteredPeple.forEach(person=> console.log(`Name: ${person.name}, Age: ${person.age}`));

    console.log(`Total age of people older than ${ageLimit}: ${totalAge}`);
}

getTotalAgeAbove(people, 30);
// Should log the total age of people older than 30 and their names.


// Question 3: Counting Words of a Certain Length
// You have an array of strings representing different words. Write a function countWordsOfLength that:

// Filter the words that have a specific length.
// Map those words into their lengths (just as a practice step).
// Reduce to count how many words have that length.
// Use forEach to log each word that has the given length.

const words = ['apple', 'banana', 'pear', 'orange', 'grape', 'watermelon'];

function countWordsOfLength (word, wordLength) {
    const filterWord = word.filter(word => word.length === wordLength);

    const countWord = filterWord.reduce((count, word) => count += 1, 0);

    filterWord.forEach(word => console.log(`Word: ${word}, Length: ${word.length}`));
    console.log(`Total word with length ${wordLength}: ${countWord}`)
}

countWordsOfLength(words, 5);
// Should log the number of words with length 5 and print those words.


// Question 4: Filtering and Modifying an Array of Objects
// You have an array of car objects with make, model, and year. Write a function getModifiedCars that:

// Filter the cars whose year is before 2020.
// Map the cars to update their year to 2024.
// Reduce the cars to get a count of how many cars were modified.
// Use forEach to log each modified car.

const cars = [
    { make: 'Toyota', model: 'Corolla', year: 2018 },
    { make: 'Honda', model: 'Civic', year: 2020 },
    { make: 'Ford', model: 'Focus', year: 2019 },
    { make: 'Honda', model: 'Focus', year: 2019 },
    { make: 'Tesla', model: 'Model 3', year: 2021 }
];

const getModifiedCars = (cars) => {
    const filterCars = cars.filter(car => car.year < 2020);
    
    const modifiedCars = filterCars.map(car => {
        car.year = 2024
        return car;
    });

    const countModifiedCars = modifiedCars.reduce((count)=> count + 1, 0);

    modifiedCars.forEach(car => console.log(`Make: ${car.make}, Model: ${car.model}, Year: ${car.year}`));
    console.log(`Total modified cars ${countModifiedCars}`);
}

getModifiedCars(cars);
// Should log the modified cars and their new years, and return the count of modified cars.

// Question 5: Filtering, Mapping, and Calculating Total Salary
// You have an array of employees with name, salary, and department. Write a function getTotalSalaryByDepartment that:

// Filter the employees based on the department (e.g., 'Engineering').
// Map the filtered employees to only their salaries.
// Reduce the salaries to get the total salary of that department.
// Use forEach to log each employee in that department.

const employees = [
    { name: 'Alice', salary: 50000, department: 'Engineering' },
    { name: 'Bob', salary: 60000, department: 'Sales' },
    { name: 'Charlie', salary: 70000, department: 'Engineering' },
    { name: 'David', salary: 55000, department: 'HR' },
    { name: 'Eve', salary: 65000, department: 'Engineering' }
];

function getTotalSalaryByDepartment(employees, department) {
    const filterEmployess = employees.filter(employee => employee.department === department);

    const filterEmployessSalary = filterEmployess.map(employeeSalary => employeeSalary.salary);

    const totalSalary = filterEmployessSalary.reduce((total, salary)=> total += salary, 0);

    filterEmployess.forEach(employee => console.log(`Name: ${employee.name}, Salary: ${employee.salary}`));

    console.log(`Total salary for ${department} department: ${totalSalary}`)
}

getTotalSalaryByDepartment(employees, 'Engineering');
// Should log the total salary for the 'Engineering' department and print the names.


</script>
</body>
</html>